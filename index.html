<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Untukmu, Sayang ‚ù§Ô∏è</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      font-family: 'Segoe UI', sans-serif;
      overflow: hidden;
    }

    .envelope {
      position: relative;
      width: 320px;
      height: 220px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      cursor: pointer;
      overflow: hidden;
      animation: float 3s ease-in-out infinite;
      z-index: 10;
    }

    .flap {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 50%;
      background: #e63946;
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      transform-origin: top;
      transition: transform 1s;
    }

    .letter {
      position: absolute;
      top: 100%;
      left: 0;
      width: 100%;
      height: 100%;
      background: white;
      text-align: center;
      padding: 20px;
      box-sizing: border-box;
      transition: top 1s;
      overflow-y: auto;
      overflow-x: hidden;
    }

    .letter::-webkit-scrollbar { width: 6px; }
    .letter::-webkit-scrollbar-thumb { background: #e63946; border-radius: 3px; }

    .letter h1 {
      color: #e63946;
      font-size: 1.8em;
      margin-bottom: 10px;
    }

    .letter p {
      color: #444;
      font-size: 1.05em;
      line-height: 1.6;
      text-align: left;
    }

    .button {
      background: #e63946;
      color: white;
      border: none;
      padding: 10px 20px;
      margin-top: 15px;
      font-size: 1em;
      border-radius: 25px;
      cursor: pointer;
      transition: 0.3s;
    }
    .button:hover { background: #d62839; transform: scale(1.1); }

    .open .flap { transform: rotateX(180deg); }
    .open .letter { top: 0; }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* Hati jatuh */
    .falling-heart {
      position: absolute;
      top: -50px;
      font-size: 20px;
      color: red;
      animation: fall linear infinite;
      opacity: 0.8;
    }
    @keyframes fall { to { transform: translateY(110vh); opacity: 0; } }

    /* Jawaban */
    .response {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.9);
      padding: 15px 25px;
      border-radius: 30px;
      font-size: 1.2em;
      color: #e63946;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      opacity: 0;
      transition: opacity 1s;
      z-index: 20;
    }
    .response.show { opacity: 1; }

    /* Kembang api */
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 5;
    }

    /* Mawar jatuh */
    .rose {
      position: absolute;
      top: -50px;
      font-size: 24px;
      animation: fall linear infinite;
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <div class="envelope" id="envelope">
    <div class="flap"></div>
    <div class="letter">
      <h1>Maafkan Aku ‚ù§Ô∏è</h1>
      <p>
        Sayangku, aku sadar aku telah banyak salah.  
        Kadang sikapku bikin kamu terluka, kadang aku kurang peka.  
        Tapi percayalah, hatiku hanya untukmu.  

        Aku mohon maaf atas semua yang sudah terjadi.  
        Aku janji akan lebih sabar, lebih perhatian,  
        dan lebih mencintaimu setiap hari.  

        Kamu adalah alasanku tersenyum, semangatku bangun tiap pagi,  
        dan bahagiaku di setiap detik hidupku.  
        Tolong jangan tinggalkan aku,  
        karena aku tak bisa bayangkan dunia tanpa kamu.  
      </p>
      <button class="button" onclick="showResponse()">Maafin Aku</button>
    </div>
  </div>

  <!-- Musik default / latar -->
  <audio id="bg-music" autoplay loop>
    <source src="https://www.bensound.com/bensound-music/bensound-romantic.mp3" type="audio/mpeg">
  </audio>

  <!-- Musik khusus ketika tombol diklik -->
  <audio id="special-music">
    <!-- Ganti ‚ÄúURL_MP3_Cause_You_Have_To‚Äù dengan link legal ke file mp3 ‚ÄùCause You Have To by LANY‚Äù -->
    <source src="sorry.mp3" type="audio/mpeg">
  </audio>

  <div class="response" id="response">Aku maafin kamu, sayang ‚ù§Ô∏è</div>
  <canvas id="fireworks"></canvas>

  <script>
    // buka amplop
    const envelope = document.getElementById("envelope");
    envelope.addEventListener("click", () => {
      envelope.classList.toggle("open");
    });

    // hati jatuh
    function createHeart() {
      const heart = document.createElement("div");
      heart.classList.add("falling-heart");
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.fontSize = (15 + Math.random() * 25) + "px";
      heart.style.animationDuration = (3 + Math.random() * 4) + "s";
      heart.innerText = "üíñ";
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 7000);
    }
    setInterval(createHeart, 400);

    // jawaban + kembang api + mawar + musik khusus
    function showResponse() {
      const resp = document.getElementById("response");
      resp.classList.add("show");
      setTimeout(() => resp.classList.remove("show"), 4000);
      launchFireworks();
      launchRoses();

      // hentikan musik latar, lalu mainkan musik khusus
      const bg = document.getElementById("bg-music");
      const special = document.getElementById("special-music");
      bg.pause();
      special.currentTime = 0;
      special.play();
    }

    // Kembang api
    const canvas = document.getElementById("fireworks");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    window.addEventListener("resize", () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    class Firework {
      constructor(x, y, color) {
        this.x = x;
        this.y = y;
        this.color = color;
        this.particles = [];
        for (let i = 0; i < 50; i++) {
          this.particles.push({
            x: x,
            y: y,
            dx: (Math.random() - 0.5) * 6,
            dy: (Math.random() - 0.5) * 6,
            life: 100
          });
        }
      }
      draw() {
        this.particles.forEach(p => {
          ctx.fillStyle = this.color;
          ctx.beginPath();
          ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
          ctx.fill();
        });
      }
      update() {
        this.particles.forEach(p => {
          p.x += p.dx;
          p.y += p.dy;
          p.dy += 0.05;
          p.life--;
        });
        this.particles = this.particles.filter(p => p.life > 0);
      }
    }

    let fireworks = [];
    function launchFireworks() {
      const colors = ["#ff4d6d", "#ffcc00", "#00ffcc", "#ff6b6b"];
      for (let i = 0; i < 3; i++) {
        fireworks.push(
          new Firework(
            Math.random() * canvas.width,
            Math.random() * canvas.height / 2,
            colors[Math.floor(Math.random() * colors.length)]
          )
        );
      }
    }

    function animate() {
      requestAnimationFrame(animate);
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      fireworks.forEach((fw, i) => {
        fw.update();
        fw.draw();
        if (fw.particles.length === 0) fireworks.splice(i, 1);
      });
    }
    animate();

    // Mawar jatuh
    function launchRoses() {
      for (let i = 0; i < 15; i++) {
        setTimeout(() => {
          const rose = document.createElement("div");
          rose.classList.add("rose");
          rose.style.left = Math.random() * 100 + "vw";
          rose.style.fontSize = (20 + Math.random() * 20) + "px";
          rose.style.animationDuration = (4 + Math.random() * 3) + "s";
          rose.innerText = "üåπ";
          document.body.appendChild(rose);
          setTimeout(() => rose.remove(), 8000);
        }, i * 300);
      }
    }
  </script>
</body>
</html>
